<!DOCTYPE html>
<html lang="en"><head>
<script src="4-2-networks-with-r_files/libs/clipboard/clipboard.min.js"></script>
<script src="4-2-networks-with-r_files/libs/quarto-html/tabby.min.js"></script>
<script src="4-2-networks-with-r_files/libs/quarto-html/popper.min.js"></script>
<script src="4-2-networks-with-r_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="4-2-networks-with-r_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="4-2-networks-with-r_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="4-2-networks-with-r_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.0.36">

  <title>Analysing Networks with Tidygraph</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="4-2-networks-with-r_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="4-2-networks-with-r_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <link rel="stylesheet" href="4-2-networks-with-r_files/libs/revealjs/dist/theme/quarto.css" id="theme">
  <link href="4-2-networks-with-r_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="4-2-networks-with-r_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="4-2-networks-with-r_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="4-2-networks-with-r_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="center">
  <h1 class="title">Analysing Networks with Tidygraph</h1>
</section>

<section id="introduction" class="slide level2">
<h2>Introduction</h2>
<p>In this class, we’ll talk through creating and analysing a network object in R. The network we’ll work with is a sample of correspondence data taken from the British State Papers in the seventeenth century.</p>
</section>
<section id="network-data-structures" class="slide level2">
<h2>Network data structures</h2>
<p>Network data comes in a number of forms. Two common ones are adjacency matrices and edge lists. An adjacency matrix is a matrix of rows and columns, one for each node. If there is a link between two nodes, a 1 is put in at that point. If it is a weighted network, the weight can be entered in the correct space. In some cases, your data may be in a format where it is easy to use it as an adjacency matrix.</p>
<p>Adjacency matrices can be easily read into R using <code>igraph</code> and <code>graph_from_adjacency_matrix()</code>.</p>
<p>The other common type is what we will work with in this lesson: an edge list. An edge list is actually also a ‘sparse matrix’.</p>
</section>
<section id="creating-a-network-object-in-r-from-an-edge-list" class="slide level2">
<h2>Creating a Network Object in R from an Edge List</h2>
<p>One of the easiest data formats to construct a network is an edge list: a simple dataframe with two columns, representing the connections between two nodes, one per row. If the network is directed, generally the ‘Source’ node is on the left side, and the ‘Target’ node on the right. It makes particular sense with correspondence data, which is often stored as records of letters with a ‘from’ and a ‘to’—more or less a ready-made edge list. In a correspondence dataset you might also have multiple sets of each of the edges (multiple letters between the same pair of individuals). This will be added to the edges as a ‘weight’.</p>
<p>We will use three R network libraries to do almost everything network-related, from analysis to visualisation: <code>igraph</code>, <code>tidygraph</code> and <code>ggraph</code>. The goal is to port everything to a format which is easy to work with using existing an established data analysis workflow. That format is known as ‘tidy data’, and it is a way of working with data which is easily transferable across a range of uses. It also means you need to learn very little new programming to do network analysis if you stay within this ‘ecosystem’.</p>
</section>
<section id="import-network-data" class="slide level2">
<h2>Import Network Data</h2>
<p>The workflow uses a number of R packages. In the CSC Notebooks environment, these have already been installed and can be loaded using the commands below. If you are doing this on a local machine, you may have to install them first using the command <code>install.packages()</code>, with the package name specified as a string, for example <code>install.packages('igraph')</code>.</p>
<div class="cell">

</div>
<p>In this class, we’ll use a dataset derived from the English State Papers. It takes the form of a .csv containing the information on the author, recipient, and date of sending for a small sample of state letters sent between 1670 and 1672.</p>
<p>Read the file into R with the <code>read_csv()</code> function from a previous lesson:</p>
<div class="cell">

</div>
<p>The letters dataset is a simple dataframe. Each row represents a letter record, and has a unique ID. Essentially, each row is a record of who the author and recipient of the letter. Each of these senders and recipients also have both a unique ID, and the original name of the letter writer and sender. The unique ID is used because it’s quite likely that the names are not unique, and the network could combine two nodes with the same name together, for example.</p>
<p>This is used to construct an edge list. If you have multiple letters between individuals, you can count them and use as a weight in the network, or you can ignore it. This is done with <code>tidyverse</code> commands we learned previously: <code>group_by()</code> and <code>tally()</code>, changing the name of the new column to ‘weight’.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 364 × 3
# Groups:   from_id [198]
   from_id                 to_id                   weight
   &lt;chr&gt;                   &lt;chr&gt;                    &lt;int&gt;
 1 E000145-S012650-T000000 E022443-S042999-T000000      1
 2 E000189-S014115-T000000 E004830-S019312-T000000      4
 3 E000189-S014115-T000000 E006871-S022202-T000000      1
 4 E000189-S014115-T000000 E022443-S042999-T000000      1
 5 E000312-S012741-T000000 E022443-S042999-T000000      2
 6 E000393-S036175-T000000 E001993-S018912-T000000      1
 7 E000520-S001769-T000000 E003476-S051213-T000000      1
 8 E000520-S001769-T000000 E022443-S042999-T000000      1
 9 E000799-S042396-T000000 E022443-S042999-T000000      1
10 E001346-S047404-T000000 E022443-S042999-T000000      1
# … with 354 more rows</code></pre>
</div>
</div>
<p>Now you see each unique combination of sender and recipient. If there are multiple letters, this is now signified by a weight of more than one in the weight column. You’ll also notice that the other information (letter IDs and actual names) has disappeared. This is not needed to make the network, but we can bring the name information back later.</p>
</section>
<section id="turn-the-edge-list-into-a-tbl_graph" class="slide level2">
<h2>Turn the edge list into a tbl_graph</h2>
<p>Next transform the edge list into a network object called a tbl_graph, using <a href="https://www.data-imaginist.com/2017/introducing-tidygraph/">tidygraph</a>. A tbl_graph is a graph object which can be manipulated using tidyverse grammar. This means you can create a network and then use a range of standard data analysis functions on it as needed.</p>
<p>Use <code>as_tbl_graph()</code> to turn the edge list into a network. The first two columns will be taken as the from and to data, and any additional columns added as attributes. An important option is the <code>directed =</code> argument. This will specify whether the network is directed (the path goes from the first column to the second) or undirected. Because this network is inherently directed (a letter is sent from one person to another), we use <code>directed = TRUE</code>. In many cases, the network will be undirected, and this should be specified using <code>directed = FALSE</code>.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tbl_graph: 248 nodes and 364 edges
#
# A directed simple graph with 6 components
#
# Node Data: 248 × 1 (active)
  name                   
  &lt;chr&gt;                  
1 E000145-S012650-T000000
2 E000189-S014115-T000000
3 E000312-S012741-T000000
4 E000393-S036175-T000000
5 E000520-S001769-T000000
6 E000799-S042396-T000000
# … with 242 more rows
#
# Edge Data: 364 × 3
   from    to weight
  &lt;int&gt; &lt;int&gt;  &lt;int&gt;
1     1    89      1
2     2    22      4
3     2   199      1
# … with 361 more rows</code></pre>
</div>
</div>
<p>The tbl_graph is an object containing two linked tables, one for the edges and one for the nodes. You can access each of the tables using the function <code>activate(nodes)</code> or <code>activate(edges)</code>. The active table is listed first and has the word ‘active’ in the description.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tbl_graph: 248 nodes and 364 edges
#
# A directed simple graph with 6 components
#
# Edge Data: 364 × 3 (active)
   from    to weight
  &lt;int&gt; &lt;int&gt;  &lt;int&gt;
1     1    89      1
2     2    22      4
3     2   199      1
4     2    89      1
5     3    89      2
6     4    10      1
# … with 358 more rows
#
# Node Data: 248 × 1
  name                   
  &lt;chr&gt;                  
1 E000145-S012650-T000000
2 E000189-S014115-T000000
3 E000312-S012741-T000000
# … with 245 more rows</code></pre>
</div>
</div>
<p>You can use many of the tidyverse commands we learned in the earlier lesson on this object, for example filtering to include only edges with a weight of more than 1:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tbl_graph: 248 nodes and 165 edges
#
# A directed simple graph with 121 components
#
# Edge Data: 165 × 3 (active)
   from    to weight
  &lt;int&gt; &lt;int&gt;  &lt;int&gt;
1     2    22      4
2     3    89      2
3     9    74      2
4    10    89      6
5    12   154      2
6    13   202      2
# … with 159 more rows
#
# Node Data: 248 × 1
  name                   
  &lt;chr&gt;                  
1 E000145-S012650-T000000
2 E000189-S014115-T000000
3 E000312-S012741-T000000
# … with 245 more rows</code></pre>
</div>
</div>
</section>
<section id="calculating-network-metrics" class="slide level2">
<h2>Calculating Network Metrics</h2>
</section>
<section id="global-metrics" class="slide level2">
<h2>Global metrics</h2>
<p>The first thing we want to do with this network is to calculate some global network statistics. Because the outputs to these are generally a single number, we don’t need to worry about storing them in a table, as we’ll do with the node-level metrics later. To calculate these metrics, generally just pass the network to a relevant function. These metrics were covered in more detail in the previous class.</p>
</section>
<section id="density" class="slide level2">
<h2>Density</h2>
<p>(the number of links present out of all possible links):</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.005942275</code></pre>
</div>
</div>
</section>
<section id="average-path-length" class="slide level2">
<h2>Average path length</h2>
<p>(the average number of hops between every pair of nodes in the network):</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11.04997</code></pre>
</div>
</div>
</section>
<section id="clustering-coefficient" class="slide level2">
<h2>Clustering coefficient:</h2>
<p>Because there are a number of ways to calculate clustering in a network, a method needs to be specified. The clustering coefficient is also known as <em>transitivity</em>, and it is defined as the ratio of completed triangles and connected triples in the graph. This measurement can be <em>global</em> (which counts the overall ratio) or <em>local</em> (which counts the individual ratio for each node). Because we want the global measurement, specific this with the <code>type =</code> argument.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.02453653</code></pre>
</div>
</div>
</section>
<section id="node-level-metrics." class="slide level2">
<h2>Node-level metrics.</h2>
<p>There are a number of ways to calculate node-level metrics (these are things like degree, betweenness as explained in the previous class). For example, you can use igraph functions to calculate the degree of single node or group of nodes. The following code returns the degree for the node with the ID <code>E004654-S006979-T000000</code> (King Charles II of England). The argument <code>mode =</code> specifies the type of degree: in, out, or all, as we learned in the previous lesson.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>E004654-S006979-T000000 
                     52 </code></pre>
</div>
</div>
<p>For most purposes, a table containing each of the nodes and the relevant metrics would be more useful (and something that can be analysed using R later). To do this, we use a function called <code>mutate()</code>. Mutate creates a new column containing the value from some calculation, which is performed on each row in the dataset.</p>
<p>Assign the name <code>degree</code> to the new column with <code>degree =</code>. The column should contain the total degree score for each node. This is done using the function <code>centrality_degree()</code>. With the two additional arguments in this function, specify the mode (in, out, or all) and, if a weighted degree score is desired, the column to be used as weights.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tbl_graph: 248 nodes and 364 edges
#
# A directed simple graph with 6 components
#
# Node Data: 248 × 2 (active)
  name                    degree
  &lt;chr&gt;                    &lt;dbl&gt;
1 E000145-S012650-T000000      1
2 E000189-S014115-T000000     21
3 E000312-S012741-T000000      6
4 E000393-S036175-T000000      3
5 E000520-S001769-T000000      2
6 E000799-S042396-T000000      1
# … with 242 more rows
#
# Edge Data: 364 × 3
   from    to weight
  &lt;int&gt; &lt;int&gt;  &lt;int&gt;
1     1    89      1
2     2    22      4
3     2   199      1
# … with 361 more rows</code></pre>
</div>
</div>
<p>The data format allows you to use dplyr pipes <code>%&gt;%</code> to perform one calculation on the data, then pass that new dataframe along to the next function. Here we calculate the degree scores first, then filter to include only nodes with a degree score over two:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tbl_graph: 51 nodes and 124 edges
#
# A directed simple graph with 2 components
#
# Node Data: 51 × 2 (active)
  name                    degree
  &lt;chr&gt;                    &lt;dbl&gt;
1 E000189-S014115-T000000      8
2 E001993-S018912-T000000     37
3 E002622-S014197-T000000     10
4 E003476-S051213-T000000      6
5 E003494                      3
6 E004454-S051301-T000000      3
# … with 45 more rows
#
# Edge Data: 124 × 3
   from    to weight
  &lt;int&gt; &lt;int&gt;  &lt;int&gt;
1     1     8      4
2     1    29      1
3     2     7      1
# … with 121 more rows</code></pre>
</div>
</div>
</section>
<section id="summarising-the-network-data" class="slide level2">
<h2>Summarising the network data</h2>
<p>To work with your new network metrics, the data can be outputted to a standard R dataframe. Create a new dataframe by doing this, using the tidyverse function for creating dataframes, <code>as_tibble()</code>:</p>
<div class="cell">

</div>
<p>This new table can be sorted, totals counted, and so forth:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 248 × 3
   name                    degree between
   &lt;chr&gt;                    &lt;dbl&gt;   &lt;dbl&gt;
 1 E004830-S019312-T000000    604   8048.
 2 E022443-S042999-T000000    270  13404.
 3 E600059-S012260-T000000    161   3223.
 4 E013473                    150    235 
 5 E004654-S006979-T000000     91  11774.
 6 E001993-S018912-T000000     72   6663.
 7 E903376-S024822-T000000     57   1623 
 8 E008063                     51      0 
 9 E002620-S051125-T000000     47      0 
10 E906453-S026312-T000000     47      0 
# … with 238 more rows</code></pre>
</div>
</div>
</section>
<section id="joining-additional-data" class="slide level2">
<h2>Joining additional data</h2>
<p>The value of working with a data model and tidygraph is that we can merge additional tables of data attributes to our nodes or edges. In a separate table, we have a dataset of attributes about this set of nodes, including place and dates of birth and death, and gender. Using the <code>join()</code> commands, we can merge this table to the network data, and use it to sort, filter (and later visualise) the data:</p>
<p>First, load the table of data using <code>read_csv</code>:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 248 × 13
   name     main_…¹ all_n…² links birth…³ death…⁴ gender roles…⁵ wikid…⁶ occup…⁷
   &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  
 1 E006019… Dr. Ra… Dr. Ra… http…    1617    1688 male   theolo… http:/… theolo…
 2 E011771… Hyde, … Edward… http…    1609    1674 male   judge;… http:/… judge;…
 3 E015103… Sir Ph… Sir Ph… http…    1607    1678 male   politi… http:/… politi…
 4 E020134… Taylor… Silas … http…    1624    1678 male   compos… http:/… compos…
 5 E014743… Sir Ed… Sir Ed… http…    1608    1654 male   econom… http:/… econom…
 6 E020485… Sir Th… Sir Th… http…    1612    1685 male   naval … http:/… naval …
 7 E004654… Charle… Charle… http…    1630    1685 male   sovere… http:/… sovere…
 8 E007992… Heneag… Heneag… http…    1628    1689 male   diplom… http:/… diplom…
 9 E007902… John F… John F… http…    1625    1686 male   priest  http:/… priest 
10 S035587  Philad… Philad… http…    1612    1665 female politi… http:/… politi…
# … with 238 more rows, 3 more variables: place_of_birth &lt;chr&gt;,
#   place_of_death &lt;chr&gt;, politician &lt;chr&gt;, and abbreviated variable names
#   ¹​main_name, ²​all_names, ³​birth_year, ⁴​death_year, ⁵​roles_titles,
#   ⁶​wikidata_item, ⁷​occupations</code></pre>
</div>
</div>
<p>This table contains further information about the nodes, each of which are identified by their unique ID. This can be joined to the network object using <code>join()</code> commands:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tbl_graph: 248 nodes and 364 edges
#
# A directed simple graph with 6 components
#
# Node Data: 248 × 13 (active)
  name  main_n… all_na… links birth_… death_… gender roles_… wikida… occupa…
  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  
1 E000… Dr. La… Dr. La… http…    1632    1703 male   chapla… http:/… chapla…
2 E000… Edward… Edward… http…    1638    1697 male   astron… http:/… astron…
3 E000… Dr. Ri… Dr. Ri… http…    1619    1681 male   priest  http:/… priest 
4 E000… Solms-… Prince… http…    1602    1675 female art co… http:/… art co…
5 E000… Arthur… Arthur… http…    1614    1686 male   politi… http:/… politi…
6 E000… Sir Jo… Sir Jo… http…    1603    1671 male   politi… http:/… politi…
# … with 242 more rows, and 3 more variables: place_of_birth &lt;chr&gt;,
#   place_of_death &lt;chr&gt;, politician &lt;chr&gt;
#
# Edge Data: 364 × 3
   from    to weight
  &lt;int&gt; &lt;int&gt;  &lt;int&gt;
1     1    89      1
2     2    22      4
3     2   199      1
# … with 361 more rows</code></pre>
</div>
</div>
<p>Using this approach you can now make subsets of the network, and calculate global or node-level statistics for these. This example would return a network containing only individuals with politician listed as one of their occupations, for example:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tbl_graph: 94 nodes and 106 edges
#
# A directed simple graph with 18 components
#
# Node Data: 94 × 14 (active)
  name  main_n… all_na… links birth_… death_… gender roles_… wikida… occupa…
  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  
1 E000… Arthur… Arthur… http…    1614    1686 male   politi… http:/… politi…
2 E000… Sir Jo… Sir Jo… http…    1603    1671 male   politi… http:/… politi…
3 E001… Henry … Henry … http…    1618    1685 male   politi… http:/… politi…
4 E002… Willia… Willia… http…    1649    1717 male   politi… http:/… politi…
5 E002… Edward… Edward… http…    1623    1683 male   politi… http:/… politi…
6 E002… Roger … Roger … http…    1621    1679 male   writer… http:/… writer…
# … with 88 more rows, and 4 more variables: place_of_birth &lt;chr&gt;,
#   place_of_death &lt;chr&gt;, politician &lt;chr&gt;, degree &lt;dbl&gt;
#
# Edge Data: 106 × 3
   from    to weight
  &lt;int&gt; &lt;int&gt;  &lt;int&gt;
1     1    33      1
2     2    33      1
3     3    10      1
# … with 103 more rows</code></pre>
</div>
</div>
<details>
<br>
<summary>
Node attributes could be added and used to filter at several steps: before the network is created, and before or after network metrics are calculated. What differences might these make?
</summary>
<p>Make sure you know at which stage you are calculating network metrics. If you calculate them after filtering, you’ll get a set of metrics based on a new, subsetted network.</p>
</details>
<p><br></p>
<p>This new table can be outputted as a dataframe, as above. Here we use this to calculate the highest-degree nodes from the ‘polticians network’, keep their real names, and sort in descending order of degree:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 94 × 3
   name                    main_name                                      degree
   &lt;chr&gt;                   &lt;chr&gt;                                           &lt;dbl&gt;
 1 E022443-S042999-T000000 Williamson, Joseph (Sir)                          174
 2 E001993-S018912-T000000 Henry Bennet, Earl of Arlington                    54
 3 E004654-S006979-T000000 Charles II, King of England, Scotland, and Ir…     53
 4 E002620-S051125-T000000 William Blathwaite                                 47
 5 E002622-S014197-T000000 Edward Conway, Earl of Conway                      30
 6 S016294                 Francis, Lord Aungier                              28
 7 E903376-S024822-T000000 Witt, Johan de                                     28
 8 S047442                 Thomas Belasyse, Earl of Fauconberg                26
 9 E921955-S041743-T000000 Sir George Rawdon                                  25
10 E021031-S049939-T000000 Van Beuningen                                      21
# … with 84 more rows</code></pre>
</div>
</div>
</section>
<section id="social-network-analysis-with-r" class="slide level2">
<h2>Social Network Analysis with R</h2>
<p>This last part goes through some of the functions which are more related to the ‘social network analysis’. Many of these are accessed directly through the package <code>igraph</code>.</p>
</section>
<section id="transitivity-triads-structural-balance" class="slide level2">
<h2>Transitivity, Triads, structural balance</h2>
<p>As we learned in the last lesson, counting the ratio of completed triangles in a network is a good way to understand its structure. This ratio is known as the <strong>clustering coefficient</strong>, and there are two types: <strong>global</strong>, which measures the ratio of complete and not complete triangles in the entire network, and <strong>local</strong>, which measures the complete triangles for each individual node. This measurement is also known as <strong>transitivity</strong>.</p>
<p>Use the following command to calculate the global clustering, or transitivity of the network. It returns a single number, which is just the ratio of completed triangles to the total possible number of triangles in the graph:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.02453653</code></pre>
</div>
</div>
<p>Use the following to measure the local clustering coefficient for each node in the graph. It returns a vector of numbers, one for each node:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>  [1]         NaN 0.095238095 1.000000000 1.000000000 0.000000000         NaN
  [7]         NaN         NaN         NaN 0.030252101         NaN 0.000000000
 [13]         NaN         NaN         NaN 0.100000000 0.000000000 0.000000000
 [19]         NaN 1.000000000 0.020390071 0.010796221         NaN 0.333333333
 [25] 1.000000000 0.000000000 1.000000000         NaN         NaN         NaN
 [31]         NaN 0.166666667         NaN         NaN 0.000000000         NaN
 [37]         NaN 0.333333333 1.000000000         NaN         NaN         NaN
 [43] 0.000000000         NaN 0.025000000         NaN         NaN 0.000000000
 [49] 0.200000000         NaN 0.000000000 1.000000000         NaN 0.000000000
 [55] 0.333333333         NaN         NaN         NaN 0.333333333         NaN
 [61] 0.000000000         NaN 0.000000000         NaN         NaN         NaN
 [67]         NaN         NaN         NaN         NaN         NaN 0.500000000
 [73] 1.000000000 0.142857143 1.000000000         NaN 0.000000000         NaN
 [79]         NaN         NaN         NaN         NaN         NaN         NaN
 [85] 0.000000000 1.000000000 0.000000000 0.000000000 0.009937888         NaN
 [91] 0.000000000         NaN 0.000000000 0.333333333 1.000000000         NaN
 [97]         NaN         NaN         NaN         NaN         NaN 0.000000000
[103]         NaN 1.000000000 0.000000000 0.090909091 0.333333333 1.000000000
[109] 0.333333333 0.000000000         NaN 0.000000000         NaN         NaN
[115]         NaN         NaN         NaN         NaN 0.000000000         NaN
[121]         NaN         NaN         NaN         NaN         NaN         NaN
[127]         NaN         NaN 0.000000000         NaN         NaN         NaN
[133] 1.000000000         NaN         NaN         NaN 1.000000000         NaN
[139]         NaN         NaN         NaN         NaN         NaN 1.000000000
[145]         NaN         NaN         NaN         NaN         NaN         NaN
[151] 0.000000000 0.000000000         NaN 0.000000000         NaN         NaN
[157]         NaN         NaN 0.000000000         NaN 1.000000000         NaN
[163]         NaN         NaN         NaN         NaN         NaN 1.000000000
[169] 1.000000000         NaN         NaN         NaN         NaN         NaN
[175]         NaN 1.000000000 0.333333333         NaN         NaN         NaN
[181]         NaN         NaN 0.000000000         NaN         NaN 0.500000000
[187] 1.000000000         NaN         NaN         NaN         NaN         NaN
[193] 1.000000000 1.000000000 1.000000000         NaN         NaN         NaN
[199]         NaN         NaN 0.035714286         NaN         NaN         NaN
[205] 0.000000000         NaN         NaN         NaN         NaN 0.000000000
[211]         NaN         NaN         NaN         NaN         NaN         NaN
[217]         NaN         NaN         NaN         NaN         NaN         NaN
[223] 0.000000000         NaN         NaN         NaN         NaN         NaN
[229]         NaN         NaN         NaN         NaN         NaN         NaN
[235]         NaN 0.333333333 0.000000000         NaN         NaN         NaN
[241]         NaN         NaN         NaN         NaN         NaN         NaN
[247]         NaN         NaN</code></pre>
</div>
</div>
<p>Anoter related measurement is the average local clustering, calculated using the following:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.361597</code></pre>
</div>
</div>
<p>We can also calculate the total reciprocity of a graph (the proportion of links which are reciprocated):</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2912088</code></pre>
</div>
</div>
<p>We can also calculate the ‘triad census’, the number of each type of triad in a directed network. First, run the <code>triad_census()</code> function, and turn it into a dataframe with one column. Next add the correct triad codes as a second column.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16 × 2
     value type 
     &lt;dbl&gt; &lt;chr&gt;
 1 2440447 003  
 2   54274 012  
 3   11363 102  
 4     550 021D 
 5    2892 021U 
 6     653 021C 
 7     636 111D 
 8     255 111U 
 9      30 030T 
10       3 030C 
11     381 201  
12       0 120D 
13       4 120U 
14       2 120C 
15       2 210  
16       4 300  </code></pre>
</div>
</div>
<p>You can now connect these codes to the triad diagrams from the last chapter, and use them to infer things about the structure and formation of the network.</p>
<details>
<summary>
Imagine that this is a complete network. Why, for example, might 021U (A and B both send a letter to C, but there’s not reciprocation, and they are not connected to each other) be such a common triad?
</summary>
<p>The answer lies in the origin of this network, as a letter archive. Because a letter archive contains mostly incoming letters to an ego node, many of the triads are pairs of nodes who both have an incoming connection to one of these ego nodes, but are not themselves connected.</p>
</details>
<p><br></p>
<p>Another set of metrics are to do with groups found in a network. First, components. A component is a group of nodes which are connected together through a path in the network. The <code>components()</code> function returns a list which includes a named vector with a component number for each node, along with the number of nodes in each component, and the total number of components. Looking at this list with <code>glimpse</code> tells us that there are six components, the largest being 237 nodes and the smallest has 2.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>List of 3
 $ membership: Named num [1:248] 1 1 1 1 1 1 1 1 1 1 ...
  ..- attr(*, "names")= chr [1:248] "E000145-S012650-T000000" "E000189-S014115-T000000" "E000312-S012741-T000000" "E000393-S036175-T000000" ...
 $ csize     : num [1:6] 237 2 3 2 2 2
 $ no        : int 6</code></pre>
</div>
</div>
<p>Another global metric we can calculate is the number of <strong>cliques</strong> in a network. A clique is a fully connected set of nodes. We can calculate the total number of cliques with <code>clique_num</code>:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
<p>Another way to look at groups in networks is to use community detection. As explained in the previous chapter, community detection attempts to find groups of nodes which are more connected to each other than they are to nodes outside the group. Unlike components or cliques, communities can be found using a number of methods. Here, we’ll use the louvain algorithm. To make it easy to use the results, we’ll calculate the community for each node using tidygraph. This particularly implementation of the algorithm only works for undirected graphs, so we have to create our network again from scratch, this time specifying that it’s undirected.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tbl_graph: 248 nodes and 364 edges
#
# An undirected multigraph with 6 components
#
# Node Data: 248 × 2 (active)
  name                    group
  &lt;chr&gt;                   &lt;int&gt;
1 E000145-S012650-T000000     1
2 E000189-S014115-T000000     2
3 E000312-S012741-T000000     3
4 E000393-S036175-T000000     5
5 E000520-S001769-T000000     7
6 E000799-S042396-T000000     1
# … with 242 more rows
#
# Edge Data: 364 × 3
   from    to weight
  &lt;int&gt; &lt;int&gt;  &lt;int&gt;
1     1    89      1
2     2    22      4
3     2   199      1
# … with 361 more rows</code></pre>
</div>
</div>
<p>By turning this information into a dataframe, we can get some basic statistics on the groups. By adding this information to the node information we collected earlier, we can get a summary of the average degree and betweenness scores for each of the detected communities:</p>

<img data-src="4-2-networks-with-r_files/figure-revealjs/unnamed-chunk-27-1.png" width="960" class="r-stretch"><div class="footer footer-default">

</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="4-2-networks-with-r_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="4-2-networks-with-r_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="4-2-networks-with-r_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="4-2-networks-with-r_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="4-2-networks-with-r_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="4-2-networks-with-r_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="4-2-networks-with-r_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="4-2-networks-with-r_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="4-2-networks-with-r_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="4-2-networks-with-r_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        function fireSlideChanged(previousSlide, currentSlide) {

          // dispatch for htmlwidgets
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for reveal
        if (window.Reveal) {
          window.Reveal.addEventListener("slidechanged", function(event) {
            fireSlideChanged(event.previousSlide, event.currentSlide);
          });
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        setTimeout(function() {
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          let href = ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const cites = ref.parentNode.getAttribute('data-cites').split(' ');
        tippyHover(ref, function() {
          var popup = window.document.createElement('div');
          cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    });
    </script>
    

</body></html>